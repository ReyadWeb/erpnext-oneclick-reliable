# ERPNext One-Click (Ubuntu 24.04) — Reliable Edition

A fast, reproducible, and **hardened** installer for **ERPNext v15** on **Ubuntu 24.04 LTS**.

---

## Quick Start (One command — interactive & validated)
```bash
# On a fresh Ubuntu 24.04 server (run as root or a sudo user)
curl -fsSL https://raw.githubusercontent.com/ReyadWeb/erpnext-oneclick-reliable/main/scripts/install_interactive.sh | bash
```

### Non-interactive (CI/automation)
```bash
git clone https://github.com/ReyadWeb/erpnext-oneclick-reliable.git
cd erpnext-oneclick-reliable
cp .env.example .env
sudo bash install.sh --env .env --production yes
```

---

## Highlights
- **Idempotent & resumable**: steps are marked and safely skipped on rerun.
- **Robust logging** to `/var/log/erpnext-oneclick/install.log` with line/command on failure.
- **APT/dpkg lock-aware** with exponential backoff retries.
- **Preflight** checks (Ubuntu version, RAM/disk, network to GitHub/PyPI).
- **Automatic swap** if RAM < 3.5GB to avoid OOM during builds.
- **Secure MariaDB** with ERPNext-friendly config (`utf8mb4`, `innodb_file_per_table`, relaxed `sql-mode`).
- **Node 18 via nvm** for the bench user + Yarn, with correct shell initialization.
- **Production setup** (optional): Nginx + Supervisor via `bench setup production` and config validation.
- **Interactive wizard** with `whiptail` fallback prompts (validates domain, warns on DNS not ready).

---

## Defaults
- **FRAPPE_USER:** frappe
- **SITE_NAME:** erp.local
- **ADMIN_PASSWORD:** admin
- **MYSQL_ROOT_PASSWORD:** autogenerated if not provided
- **APPS:** erpnext hrms payments
- **FRAPPE_BRANCH:** version-15

Change via `.env` or installer flags.

---

## Troubleshooting
- Logs: `/var/log/erpnext-oneclick/install.log`
- Re-run the same command; completed steps are skipped. Many commands auto-retry.
- If PDFs look off: consider a patched wkhtmltopdf 0.12.x build for Ubuntu 24.04.
- For production, ensure your **domain’s A record** points to the server *before* TLS/NGINX steps.

---

## Uninstall (danger)
```bash
sudo bash uninstall.sh
```

---

## License
MIT © 2025 ReyadWeb
